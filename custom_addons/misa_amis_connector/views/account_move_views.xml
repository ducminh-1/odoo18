<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_account_invoice_filter" model="ir.ui.view">
        <field name="name">account.move.select.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_account_invoice_filter" />
        <field name="arch" type="xml">
            <filter name="cancel" position="after">
                <separator />
                <filter
                    name="is_invoice_machine"
                    string="Hóa đơn máy tính tiền"
                    domain="[('is_invoice_machine', '=', True)]"
                />
                <filter
                    name="synced_to_misa"
                    string="Đã đồng bộ MISA"
                    domain="[('misa_post_status','=','success')]"
                />
                <filter
                    name="not_synced_to_misa"
                    string="Chưa đồng bộ MISA"
                    domain="[('misa_post_status','!=','success')]"
                />
            </filter>
        </field>
    </record>

    <record id="view_move_form" model="ir.ui.view">
        <field name="name">account.move.form.inherit.misa_amis_connector</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form" />
        <field name="arch" type="xml">
            <form position="inside">
                <field name="can_create_misa_sa_voucher" invisible="1" />
            </form>
            <xpath expr="//div[@name='button_box']" position="inside">
                <field name="misa_sa_voucher_count" invisible="1" />
                <button
                    name="action_view_misa_sa_vouchers"
                    class="oe_stat_button"
                    icon="fa-bars"
                    type="object"
                    invisible="not misa_sa_voucher_count"
                >
                    <field
                        name="misa_sa_voucher_count"
                        string="SA Vouchers"
                        widget="statinfo"
                    />
                </button>
            </xpath>

            <xpath expr="//button[@name='action_post']" position="after">
                <button
                    name="%(misa_amis_connector.action_view_inv_make_sa_vouchers)d"
                    string="Tạo chứng từ Misa"
                    type="action"
                    class="btn-primary"
                    data-hotkey="q"
                    invisible="not can_create_misa_sa_voucher"
                />
            </xpath>
        </field>
    </record>
</odoo>
